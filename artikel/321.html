---
permalink: /artikel/321/index.html
---

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" xml:lang="sv" lang="sv">
	<head>
		<title>Fjeldstad.se - En hel massa artiklar, helt enkelt</title>
		<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1"/>
		<meta name="author" content="Anders Fjeldstad et al."/>
		<link rel="stylesheet" href="/fjeldstad.css" type="text/css"/>
		<link rel="shortcut icon" href="/bilder/favicon.ico" type="image/favicon"/>
		<script type="text/javascript" src="/fjeldstad.js"></script>
			</head>
	<body>
		<div id="box">
			<div id="box_uppe"></div>
			<div id="box_mitten">
				<div id="navigering">
					<!-- Det a-element som är aktivt ska ha id 'navigering_aktiv' -->
					<a  href="/start"><img src="/bilder/design/start_inaktiv.jpg" alt="Start"/></a>
					<a href="/artikelarkiv"><img src="/bilder/design/artikelarkiv_inaktiv.jpg" alt="Artikelarkiv"/></a>
					<a href="/forfattare"><img src="/bilder/design/forfattare_inaktiv.jpg" alt="Författare"/></a>
					<a href="/om"><img src="/bilder/design/omfjeldstadse_inaktiv.jpg" alt="Om Fjeldstad.se"/></a>
					<a href="/kontakt"><img src="/bilder/design/kontakt_inaktiv.jpg" alt="Kontakt"/></a>
					<a href="/skriv"><img src="/bilder/design/skriv_inaktiv.jpg" alt="Skriv!"/></a>
				</div>
				<div id="arbetsyta">
					<div id="vansterspalt">
		<div id="artikel-bilder">
		<img class="dropshadow" src="/bilder/titelbilder/321.jpg" alt="Sortering och filtrering av medelstora datamängder i ett webbgränssnitt"/>
	</div>
	
		<h3>Externa länkar</h3>
	<ul>
				<li><a href="http://www.samuelsjoberg.com/archive/2004/11/filtering-of-lists" title="Filtering of lists">Filtering of lists</a></li>
				<li><a href="http://www.sergiopereira.com/articles/prototype.js.html" title="Prototype">Prototype</a></li>
				<li><a href="http://www.kryogenix.org/code/browser/sorttable/" title="sorttable">sorttable</a></li>
			</ul>
	
	
		<h3>Läsarnas kommentarer</h3>
	<ul id="kommentarlista">
				<li><span>1. The Jesus <span>4 november 2005</span></span><div class="avdelare"></div><p>Vad f&ouml;rest&auml;ller bilden?</p></li>
				<li><span>2. Anders <span>4 november 2005</span></span><div class="avdelare"></div><p>Det du...</p></li>
			</ul>
	
	

</div>
<div id="hogerspalt" style="margin-bottom: 0px;">
	<div id="artikel">
		<h1>Sortering och filtrering av medelstora datam&auml;ngder i ett webbgr&auml;nssnitt</h1>
		<div class="ingress">
			<p>Titeln p&aring; den h&auml;r artikeln &auml;r l&aring;ng men &auml;nd&aring; &auml;rlig. Jag sammanfattar h&auml;r n&aring;gra funderingar, id&eacute;er och fr&aring;gest&auml;llningar g&auml;llande sortering och filtrering (s&ouml;kning) i medelstora m&auml;ngder information. Och det &auml;r webben, eller en del av den, som &auml;r spelplanen.</p>		</div>
		<div>
			<p>Under ett nu p&aring;g&aring;ende projekt har jag st&auml;llts inf&ouml;r problemet med sortering och filtrering i webbgr&auml;nssnitt. Det hela f&ouml;rsv&aring;ras av att den information som ska hanteras &auml;r ganska omfattande (hundra- eller tusentals rader i databasen, beroende p&aring; hur man r&auml;knar).</p> <h3>Problemet</h3> <p>Det jag m&aring;ste l&ouml;sa &auml;r ett s&auml;tt att snabbt hitta information i en datam&auml;ngd, utan att man f&ouml;rlorar &ouml;versk&aring;dlighet. En ren s&ouml;kfunktion i stil med Google (d&auml;r man skriver in kriteria och f&aring;r en lista med s&ouml;ktr&auml;ffar) r&auml;cker inte riktigt. Jag m&aring;ste kunna markera intressanta s&ouml;ktr&auml;ffar, g&ouml;ra s&ouml;kningen smalare genom att f&ouml;rkasta vissa rader (n&auml;r jag skriver <em>rad</em> menar jag i princip en s&ouml;ktr&auml;ff) och g&ouml;ra helt nya s&ouml;kningar &ndash; utan att f&ouml;rlora kontrollen &ouml;ver de rader jag valt ut f&ouml;r vidare behandling.</p> <p>Dessutom ska jag kunna sortera raderna i stigande respektive fallande ordning baserat p&aring; de kolumner som presenteras. Och allt ska g&aring; fort, &aring;tminstone tillr&auml;ckligt fort f&ouml;r att anv&auml;ndaren inte ska tr&ouml;ttna eller bli frustrerad.</p> <h3>Klurigheter, eller varf&ouml;r detta inte &auml;r trivialt</h3> <p>Den f&ouml;rsta patrull jag st&ouml;ter p&aring; &auml;r att det finns mycket information att hantera, &aring;tminstone tills man gjort ett f&ouml;rsta urval. I dagsl&auml;get tittar jag p&aring; drygt 600 rader med fem eller sex kolumner n&auml;r jag g&ouml;r ett en fullst&auml;ndig listning. F&ouml;rutom detta s&aring; ligger det drygt 22.000 rader i databasen med ytterligare info som &auml;r kopplad till den som presenteras, och som ska vara s&ouml;kbar.&auml;</p><p>Klientsidan &ndash; webbl&auml;saren allts&aring; &ndash; kan <a href="http://www.kryogenix.org/code/browser/sorttable/" target="_self" title="Sortering av tabeller med Javascript">sortera</a> och <a href="http://www.samuelsjoberg.com/archive/2004/11/filtering-of-lists" target="_self" title="Filtrering av listor med Javascript">filtrera</a> data p&aring; ett s&auml;tt som g&ouml;r att k&auml;nslan i det grafiska gr&auml;nssnittet kan g&ouml;ras lik en vanlig skrivbordsapplikation, vilket &auml;r bra. Nackdelen &auml;r att prestandan starkt knyts till anv&auml;ndarens dator. Vidare hindrar den (initialt) stora m&auml;ngden information mig fr&aring;n att k&ouml;ra med en klientbaserad l&ouml;sning rakt av, eftersom det helt enkelt inte g&aring;r tillr&auml;ckligt fort.</p> <h3>N&aring;gra id&eacute;er eller l&ouml;sningsskisser</h3> <p>Okej, jag har funderat p&aring; detta en del nu och kommit p&aring; flera id&eacute;er p&aring; l&ouml;sningar av varierande kvalitet. En liten sammanst&auml;llning av de alternativ jag identifierat hittills:</p> <ul>   <li><strong>L&auml;s in hela datam&auml;ngden</strong> (de cirka 600 raderna) till klienten. <em>Skicka s&ouml;kkriterierna till servern </em>med AJAX-teknik, l&aring;t den anv&auml;nda databassystemets kraft f&ouml;r att filtrera och sortera och skicka tillbaka <em>instruktioner </em>till klienten som f&ouml;rklarar hur denna ska d&ouml;lja och flytta runt rader. <strong>En f&ouml;rdel </strong>&auml;r att man slipper skicka hela datam&auml;ngden flera g&aring;nger och att alla rader alltid <em>finns</em> hos klienten, &auml;ven om de kan vara dolda ibland. Detta g&ouml;r att anv&auml;ndaren l&auml;tt kan &quot;stega bak&aring;t&quot; i filtreringen om denne skulle ha angivit f&ouml;r tajta kriteria. <strong>Nackdelar </strong>&auml;r bland annat att det fortfarande g&aring;r f&ouml;r l&aring;ngsamt (ett experiment jag gjort visar att det tar i alla fall ett par-tre sekunder p&aring; min dator f&ouml;r klienten att st&ouml;ka om bland 300 enklare rader &auml;ven om slutordningen &auml;r k&auml;nd) samt att f&ouml;r&auml;ndringar i databasen kan missas av anv&auml;ndaren eftersom omladdningar av data inte g&ouml;rs s&aring; ofta.</li><li><strong>L&aring;t anv&auml;ndaren b&ouml;rja med en tom sida</strong>, som p&aring; Google. Visa information f&ouml;rst n&auml;r n&aring;gra inledande kriteria angivits. Vid det laget b&ouml;r m&auml;ngden s&ouml;ktr&auml;ffar blivit <em>hanterbart m&aring;nga</em>, och klienten kan sk&ouml;ta sortering utan att det tar f&ouml;r l&aring;ng tid. Alternativt skulle man kunna l&aring;ta s&ouml;kningen/sorteringen ske p&aring; klient respektive server <em>beroende p&aring; m&auml;ngden inladdad information</em>. Kanske g&aring;r det till och med att l&aring;ta antalet f&ouml;rv&auml;ntade s&ouml;ktr&auml;ffar p&aring;verka metoden, &auml;ven om jag inte riktigt ser hur det skulle utnyttjas.</li>   <li>L&aring;t alltid servern g&ouml;ra urval och sortering, med utg&aring;ngspunkt i kriteria som sammanst&auml;llts p&aring; klientsidan. <strong>Dela upp datapresentationen i tv&aring; (fysiska) delar</strong> &ndash; en yta f&ouml;r s&ouml;ktr&auml;ffar och en f&ouml;r &quot;sparade&quot; rader. Anv&auml;ndaren kan d&aring; l&aring;ta servern sk&ouml;ta s&ouml;kningen och sedan spara undan de rader som &auml;r intressanta f&ouml;r att sedan s&ouml;ka vidare med nya kriteria. Kommunikationen med servern kan ske med ett AJAX-objekt (till exempel med hj&auml;lp av biblioteket <a href="http://www.sergiopereira.com/articles/prototype.js.html" target="_self" title="L&auml;s om hur man anv&auml;nder prototype">prototype</a>) s&aring; beh&ouml;ver inte webbl&auml;saren ladda om hela sidan vid varje s&ouml;kning.</li></ul><p>Det sista l&ouml;sningsf&ouml;rslaget &auml;r det jag kommit p&aring; senast (alldeles nyss faktiskt) och verkar f&ouml;r mig vara det vettigaste. Kanske skulle det kombineras med det andra, s&aring; att man l&aring;ter klienten sortera om det inte &auml;r f&ouml;r mycket information att hantera. Det som tilltalar mig mest med just detta alternativ &auml;r att man l&aring;ter databasen jobba. Det &auml;r inte bara studenter p&aring; D-linjen som gillar att sortera data&ndash; &auml;ven mySQL s&auml;llar sig till skaran... <br /> </p><p>Jag s&auml;tter punkt h&auml;r, men kom g&auml;rna med synpunkter och kommentarer! Jag &auml;r &ouml;ppen f&ouml;r f&ouml;rslag. Vi h&ouml;rs!&nbsp;</p>		</div>
		<div id="signatur">
						<a href="/forfattare/1"><img src="/bilder/forfattarbilder/1.jpg" alt="Anders Fjeldstad"/></a>
						<p style="padding-top: 60px;">
				<a href="/forfattare/1">Anders Fjeldstad</a><br/>
				Publicerad 3 november 2005			</p>
			<div class="clear"></div>
		</div>
	</div>
</div>
					<div style="clear: both;"></div>
				</div>
				<div id="sidfot">
					<p>Copyright &copy; 2005 <a href="/forfattare">Anders Fjeldstad et al.</a></p>
				</div>
			</div>
			<div id="box_nere"></div>
		</div>
		<script src="http://www.google-analytics.com/urchin.js" type="text/javascript"></script>
		<script type="text/javascript">
			_uacct = "UA-342048-1";
			urchinTracker();
		</script>
	</body>
</html>
